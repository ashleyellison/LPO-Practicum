-----------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/doylewr/practicum_2017/central/assignments/semester_2_assignment_01/assignment1_f
> ollowup.log
  log type:  text
 opened on:  16 Jan 2018, 10:54:47

. 
. // Assignment 1 Followup
. // Will Doyle
. // One way to do this assignment
. // On Github
. 
. global ddir "../../data/"

. 
. use "${ddir}plans2.dta", clear

. 
. // ## Leadership, Policy and Organizations
. // ## Class Number 9952
. // ## Spring 2016
. 
. // **Part 1**
. 
. // Write a program that does the following:
. 
. // 1.  Takes a variable list (assumed to be each a factor) as its argument
. 
. // 2.  Converts each factor variable to a series of dummy variables
. 
. // 3.  Returns dummy variables that are appropriately labeled (both as
. //     variables and values)
. 
. // Binary variable level
. label define yesno 1 "Yes"  0 "No"

. 
. 
. local factor_list bypared byincome

. 
. foreach myfactor of local factor_list{
  2. 
. // list of numbers associated with each level of the variable
. levelsof `myfactor', local(mylevels)
  3. 
. di "`mylevels'"
  4. 
. // Labels for each level
. local mylabel: value label `myfactor'
  5. 
. di "`mylabel'"
  6. 
. //use tab to generate dummy variables
. tab `myfactor',gen(`myfactor'_)
  7. 
. // init counter
. local i=1
  8. // Iterate through each of the levels
. foreach mylevel of local mylevels{
  9. di "`mylevel'"
 10. // Grab value label for level
. local myname:label `mylabel' `i' 
 11. di "`myname'"
 12. // Label variable with value label
. label variable `myfactor'_`mylevel'  "`myname'"
 13. // Give binary variable appropriate value labels
. label values  `myfactor'_`mylevel' yesno
 14. //Iterate counter
. local i= `i'+1
 15. }   
 16. 
. //Tab results (not necessary)
. foreach mylevel of local mylevels{
 17. tab `myfactor'_`mylevel'
 18. }
 19. 
. }
1 2 3 4 5 6 7 8
1 2 3 4 5 6 7 8
bypared

    parents^ highest level of education |      Freq.     Percent        Cum.
----------------------------------------+-----------------------------------
             did not finish high school |        942        6.16        6.16
      graduated from high school or ged |      3,044       19.89       26.05
      attended 2-year school, no degree |      1,663       10.87       36.91
           graduated from 2-year school |      1,597       10.44       47.35
     attended college, no 4-year degree |      1,758       11.49       58.83
                 graduated from college |      3,466       22.65       81.48
completed master^s degree or equivalent |      1,785       11.66       93.15
completed phd, md, other advanced degre |      1,049        6.85      100.00
----------------------------------------+-----------------------------------
                                  Total |     15,304      100.00
1
did not finish high school
2
graduated from high school or ged
3
attended 2-year school, no degree
4
graduated from 2-year school
5
attended college, no 4-year degree
6
graduated from college
7
completed master^s degree or equivalent
8
completed phd, md, other advanced degree

    did not |
finish high |
     school |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     14,362       93.84       93.84
        Yes |        942        6.16      100.00
------------+-----------------------------------
      Total |     15,304      100.00

  graduated |
  from high |
  school or |
        ged |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     12,260       80.11       80.11
        Yes |      3,044       19.89      100.00
------------+-----------------------------------
      Total |     15,304      100.00

   attended |
     2-year |
 school, no |
     degree |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     13,641       89.13       89.13
        Yes |      1,663       10.87      100.00
------------+-----------------------------------
      Total |     15,304      100.00

  graduated |
from 2-year |
     school |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     13,707       89.56       89.56
        Yes |      1,597       10.44      100.00
------------+-----------------------------------
      Total |     15,304      100.00

   attended |
college, no |
     4-year |
     degree |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     13,546       88.51       88.51
        Yes |      1,758       11.49      100.00
------------+-----------------------------------
      Total |     15,304      100.00

  graduated |
       from |
    college |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     11,838       77.35       77.35
        Yes |      3,466       22.65      100.00
------------+-----------------------------------
      Total |     15,304      100.00

  completed |
   master^s |
  degree or |
 equivalent |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     13,519       88.34       88.34
        Yes |      1,785       11.66      100.00
------------+-----------------------------------
      Total |     15,304      100.00

  completed |
   phd, md, |
      other |
   advanced |
     degree |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     14,255       93.15       93.15
        Yes |      1,049        6.85      100.00
------------+-----------------------------------
      Total |     15,304      100.00
1 2 3 4 5 6 7 8 9 10 11 12 13
1 2 3 4 5 6 7 8 9 10 11 12 13
byincome

           Income |      Freq.     Percent        Cum.
------------------+-----------------------------------
             none |         80        0.50        0.50
   $1,000 or less |        178        1.10        1.60
    $1,001-$5,000 |        304        1.88        3.48
   $5,001-$10,000 |        351        2.17        5.65
  $10,001-$15,000 |        697        4.31        9.96
  $15,001-$20,000 |        781        4.83       14.80
  $20,001-$25,000 |        996        6.16       20.96
  $25,001-$35,000 |      1,887       11.68       32.64
  $35,001-$50,000 |      3,017       18.67       51.31
  $50,001-$75,000 |      3,309       20.48       71.78
 $75,001-$100,000 |      2,173       13.45       85.23
$100,001-$200,000 |      1,806       11.18       96.40
 $200,001 or more |        581        3.60      100.00
------------------+-----------------------------------
            Total |     16,160      100.00
1
none
2
$1,000 or less
3
$1,001-$5,000
4
$5,001-$10,000
5
$10,001-$15,000
6
$15,001-$20,000
7
$20,001-$25,000
8
$25,001-$35,000
9
$35,001-$50,000
10
$50,001-$75,000
11
$75,001-$100,000
12
$100,001-$200,000
13
$200,001 or more

       none |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     16,080       99.50       99.50
        Yes |         80        0.50      100.00
------------+-----------------------------------
      Total |     16,160      100.00

  $1,000 or |
       less |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     15,982       98.90       98.90
        Yes |        178        1.10      100.00
------------+-----------------------------------
      Total |     16,160      100.00

$1,001-$5,0 |
         00 |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     15,856       98.12       98.12
        Yes |        304        1.88      100.00
------------+-----------------------------------
      Total |     16,160      100.00

$5,001-$10, |
        000 |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     15,809       97.83       97.83
        Yes |        351        2.17      100.00
------------+-----------------------------------
      Total |     16,160      100.00

$10,001-$15 |
       ,000 |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     15,463       95.69       95.69
        Yes |        697        4.31      100.00
------------+-----------------------------------
      Total |     16,160      100.00

$15,001-$20 |
       ,000 |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     15,379       95.17       95.17
        Yes |        781        4.83      100.00
------------+-----------------------------------
      Total |     16,160      100.00

$20,001-$25 |
       ,000 |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     15,164       93.84       93.84
        Yes |        996        6.16      100.00
------------+-----------------------------------
      Total |     16,160      100.00

$25,001-$35 |
       ,000 |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     14,273       88.32       88.32
        Yes |      1,887       11.68      100.00
------------+-----------------------------------
      Total |     16,160      100.00

$35,001-$50 |
       ,000 |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     13,143       81.33       81.33
        Yes |      3,017       18.67      100.00
------------+-----------------------------------
      Total |     16,160      100.00

$50,001-$75 |
       ,000 |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     12,851       79.52       79.52
        Yes |      3,309       20.48      100.00
------------+-----------------------------------
      Total |     16,160      100.00

$75,001-$10 |
      0,000 |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     13,987       86.55       86.55
        Yes |      2,173       13.45      100.00
------------+-----------------------------------
      Total |     16,160      100.00

$100,001-$2 |
     00,000 |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     14,354       88.82       88.82
        Yes |      1,806       11.18      100.00
------------+-----------------------------------
      Total |     16,160      100.00

$200,001 or |
       more |      Freq.     Percent        Cum.
------------+-----------------------------------
         No |     15,579       96.40       96.40
        Yes |        581        3.60      100.00
------------+-----------------------------------
      Total |     16,160      100.00

. 
. 
. 
. 
. 
. // **Part 2**
. 
. // Following the logic we went over in class, generate a simple mean of
. // your dependent variable, followed by the conditional mean of your
. // dependent variable over the levels of a continuous or ordinal
. // independent variable. Use 2,4, and 10 categories. Then run a regression
. // and predict the dependent variable from your independent variable.
. // Generate a mean squared error for each type of prediction (unconditional
. // and conditional means, regression) and describe what you find.
. 
. 
. egen mean_math=mean(bynels2m)

. 
. // College vs. noncollege
. recode bypared (1/2=0) (nonmiss=1), gen(bypared2)
(15304 differences between bypared and bypared2)

. 
. egen cond_mean_math_2=mean(bynels2m), by(bypared2)

. 
. recode bypared (1/2=1) (3/5=2) (6=3) (7/8=4), gen(bypared4)
(14362 differences between bypared and bypared4)

. 
. egen cond_mean_math_4=mean(bynels2m), by(bypared2)

. 
. egen cond_mean_math_all=mean(bynels2m), by(bypared)

. 
. local mynums 2 4 all

. 
. foreach mynum of local mynums{
  2. gen resid=bynels2m-cond_mean_math_`mynum'
  3. gen resid_sq=resid^2
  4. sum resid_sq
  5. scalar mse_math_`mynum'=r(mean)
  6. scalar rmse_math_`mynum'=sqrt(mse_math_`mynum')
  7. drop resid resid_sq 
  8. }
(276 missing values generated)
(276 missing values generated)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    resid_sq |     15,884    .0171763    .0197404   3.55e-13   .1557004
(276 missing values generated)
(276 missing values generated)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    resid_sq |     15,884    .0171763    .0197404   3.55e-13   .1557004
(276 missing values generated)
(276 missing values generated)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    resid_sq |     15,884    .0162212    .0194135   5.56e-10   .1515651

. 
. reg bynels2m i.bypared

      Source |       SS           df       MS      Number of obs   =    15,236
-------------+----------------------------------   F(7, 15228)     =    290.92
       Model |  33.3628531         7  4.76612187   Prob > F        =    0.0000
    Residual |  249.475591    15,228  .016382689   R-squared       =    0.1180
-------------+----------------------------------   Adj R-squared   =    0.1176
       Total |  282.838444    15,235  .018565044   Root MSE        =    .12799

----------------------------------------------------------------------------------------------------
                          bynels2m |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------------------+----------------------------------------------------------------
                           bypared |
graduated from high school or ged  |   .0422428   .0048083     8.79   0.000     .0328179    .0516678
attended 2-year school, no degree  |   .0627876   .0052482    11.96   0.000     .0525005    .0730746
     graduated from 2-year school  |   .0815372   .0052905    15.41   0.000     .0711672    .0919071
attended college, no 4-year deg..  |   .0835555   .0051992    16.07   0.000     .0733644    .0937466
           graduated from college  |   .1220803   .0047363    25.78   0.000     .1127967     .131364
completed master^s degree or eq..  |   .1569702   .0051861    30.27   0.000     .1468048    .1671356
completed phd, md, other advanc..  |   .1658553   .0057727    28.73   0.000     .1545401    .1771705
                                   |
                             _cons |   .3629864   .0042062    86.30   0.000     .3547418     .371231
----------------------------------------------------------------------------------------------------

. 
. scalar reg_rmse=e(rmse)

. 
. scalar li
  reg_rmse =  .12799488
rmse_math_all =  .12736252
mse_math_all =  .01622121
rmse_math_4 =   .1310585
mse_math_4 =  .01717633
rmse_math_2 =   .1310585
mse_math_2 =  .01717633

. 
. // Lowest rmse is from predictions from all levels, which is very similar to regression, likely a p
> recision problem.
. 
. // Submit the results of part 1 and 2 as a do file, with appropriate
. // comments. 
. 
. // Naming convention for this semester will be: `<yourlastname>'_assignment<#>.do`.
. // Therefore, if I was turning in this assignment, I would call it `doyle_assignment1.do`.
. 
. 
. 
end of do-file

. cd ~/tn_aid/scripts
unable to change to /Users/doylewr/tn_aid/scripts
r(170);

. cd ~/tn_aid_submit/scripts
/Users/doylewr/tn_aid_submit/scripts

. do 170220_tsaa_clean.do

. clear all

. capture log close
